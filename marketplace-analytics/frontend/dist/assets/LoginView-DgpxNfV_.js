import{d as g,u as V,r as n,a as u,c as h,b as p,o as c,e as r,f as o,g as _,h as k,i as m,w as N,t as S,j as $,k as B,l as C}from"./index-C06cxT_l.js";import{r as E,_ as f,a as j}from"./BaseInput.vue_vue_type_script_setup_true_lang-BZs7bInV.js";import{_ as q}from"./BaseButton.vue_vue_type_script_setup_true_lang-BdOSKptw.js";import{r as F}from"./ExclamationTriangleIcon-DG5ZDN47.js";const L={key:0,class:"rounded-md bg-red-50 p-4"},U={class:"flex"},A={class:"ml-3"},D={class:"mt-2 text-sm text-red-700"},H=g({__name:"LoginView",setup(M){const w=C(),x=V(),s=n({email:"",password:""}),a=n({email:"",password:""}),i=u(!1),l=u(""),v=h(()=>s.email&&s.password&&!a.email&&!a.password),y=()=>(a.email="",a.password="",s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="Некорректный формат email"):a.email="Email обязателен",s.password?s.password.length<6&&(a.password="Пароль должен содержать минимум 6 символов"):a.password="Пароль обязателен",!a.email&&!a.password),b=async()=>{var d,e;if(y())try{i.value=!0,l.value="",await x.login({email:s.email,password:s.password}),w.push("/")}catch(t){l.value=((e=(d=t.response)==null?void 0:d.data)==null?void 0:e.message)||"Произошла ошибка при входе"}finally{i.value=!1}};return(d,e)=>(c(),p("div",null,[e[5]||(e[5]=r("div",{class:"mb-6"},[r("h2",{class:"text-center text-2xl font-bold text-gray-900"},"Вход в систему"),r("p",{class:"mt-2 text-center text-sm text-gray-600"}," Войдите в свой аккаунт для доступа к аналитике ")],-1)),r("form",{onSubmit:$(b,["prevent"]),class:"space-y-6"},[o(f,{id:"email",modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),label:"Email",type:"email",placeholder:"your@email.com",required:"",error:a.email,icon:m(E)},null,8,["modelValue","error","icon"]),o(f,{id:"password",modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),label:"Пароль",type:"password",placeholder:"••••••••",required:"",error:a.password,icon:m(j)},null,8,["modelValue","error","icon"]),e[4]||(e[4]=_('<div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"><label for="remember-me" class="ml-2 block text-sm text-gray-900"> Запомнить меня </label></div><div class="text-sm"><a href="#" class="font-medium text-primary-600 hover:text-primary-500"> Забыли пароль? </a></div></div>',1)),o(q,{type:"submit",variant:"primary",loading:i.value,disabled:!v.value,"full-width":""},{default:N(()=>[...e[2]||(e[2]=[B(" Войти ",-1)])]),_:1},8,["loading","disabled"]),l.value?(c(),p("div",L,[r("div",U,[o(m(F),{class:"h-5 w-5 text-red-400"}),r("div",A,[e[3]||(e[3]=r("h3",{class:"text-sm font-medium text-red-800"},"Ошибка входа",-1)),r("div",D,[r("p",null,S(l.value),1)])])])])):k("",!0)],32)]))}});export{H as default};
//# sourceMappingURL=LoginView-DgpxNfV_.js.map
