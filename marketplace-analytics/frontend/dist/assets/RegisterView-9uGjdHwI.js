import{d as T,u as k,r as f,a as w,c as _,b as u,o as p,e as a,f as l,h as x,i,m as $,n as U,v as j,k as c,t as v,w as C,j as E,l as N}from"./index-C06cxT_l.js";import{_ as m,r as S,a as g}from"./BaseInput.vue_vue_type_script_setup_true_lang-BZs7bInV.js";import{_ as q}from"./BaseButton.vue_vue_type_script_setup_true_lang-BdOSKptw.js";import{r as B}from"./ExclamationTriangleIcon-DG5ZDN47.js";const O={class:"flex items-center"},R={key:0,class:"text-sm text-red-600"},D={key:1,class:"rounded-md bg-red-50 p-4"},F={class:"flex"},M={class:"ml-3"},A={class:"mt-2 text-sm text-red-700"},K=T({__name:"RegisterView",setup(z){const y=N(),b=k(),e=f({name:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),s=f({name:"",email:"",password:"",confirmPassword:"",agreeTerms:""}),n=w(!1),d=w(""),V=_(()=>e.email&&e.password&&e.confirmPassword&&e.agreeTerms&&!Object.values(s).some(t=>t)),h=()=>(Object.keys(s).forEach(t=>{s[t]=""}),e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(s.email="Некорректный формат email"):s.email="Email обязателен",e.password?e.password.length<6&&(s.password="Пароль должен содержать минимум 6 символов"):s.password="Пароль обязателен",e.confirmPassword?e.password!==e.confirmPassword&&(s.confirmPassword="Пароли не совпадают"):s.confirmPassword="Подтверждение пароля обязательно",e.agreeTerms||(s.agreeTerms="Необходимо согласиться с условиями использования"),!Object.values(s).some(t=>t)),P=async()=>{var t,r;if(h())try{n.value=!0,d.value="",await b.register({email:e.email,password:e.password,name:e.name||void 0}),y.push("/")}catch(o){d.value=((r=(t=o.response)==null?void 0:t.data)==null?void 0:r.message)||"Произошла ошибка при регистрации"}finally{n.value=!1}};return(t,r)=>(p(),u("div",null,[r[8]||(r[8]=a("div",{class:"mb-6"},[a("h2",{class:"text-center text-2xl font-bold text-gray-900"},"Создать аккаунт"),a("p",{class:"mt-2 text-center text-sm text-gray-600"}," Зарегистрируйтесь для начала работы с аналитикой ")],-1)),a("form",{onSubmit:E(P,["prevent"]),class:"space-y-6"},[l(m,{id:"name",modelValue:e.name,"onUpdate:modelValue":r[0]||(r[0]=o=>e.name=o),label:"Имя",placeholder:"Ваше имя",error:s.name,icon:i($)},null,8,["modelValue","error","icon"]),l(m,{id:"email",modelValue:e.email,"onUpdate:modelValue":r[1]||(r[1]=o=>e.email=o),label:"Email",type:"email",placeholder:"your@email.com",required:"",error:s.email,icon:i(S)},null,8,["modelValue","error","icon"]),l(m,{id:"password",modelValue:e.password,"onUpdate:modelValue":r[2]||(r[2]=o=>e.password=o),label:"Пароль",type:"password",placeholder:"••••••••",required:"",error:s.password,icon:i(g),hint:"Минимум 6 символов"},null,8,["modelValue","error","icon"]),l(m,{id:"confirmPassword",modelValue:e.confirmPassword,"onUpdate:modelValue":r[3]||(r[3]=o=>e.confirmPassword=o),label:"Подтвердите пароль",type:"password",placeholder:"••••••••",required:"",error:s.confirmPassword,icon:i(g)},null,8,["modelValue","error","icon"]),a("div",O,[U(a("input",{id:"agree-terms","onUpdate:modelValue":r[4]||(r[4]=o=>e.agreeTerms=o),name:"agree-terms",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[j,e.agreeTerms]]),r[5]||(r[5]=a("label",{for:"agree-terms",class:"ml-2 block text-sm text-gray-900"},[c(" Я согласен с "),a("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"условиями использования"),c(" и "),a("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"политикой конфиденциальности")],-1))]),s.agreeTerms?(p(),u("div",R,v(s.agreeTerms),1)):x("",!0),l(q,{type:"submit",variant:"primary",loading:n.value,disabled:!V.value,"full-width":""},{default:C(()=>[...r[6]||(r[6]=[c(" Создать аккаунт ",-1)])]),_:1},8,["loading","disabled"]),d.value?(p(),u("div",D,[a("div",F,[l(i(B),{class:"h-5 w-5 text-red-400"}),a("div",M,[r[7]||(r[7]=a("h3",{class:"text-sm font-medium text-red-800"},"Ошибка регистрации",-1)),a("div",A,[a("p",null,v(d.value),1)])])])])):x("",!0)],32)]))}});export{K as default};
//# sourceMappingURL=RegisterView-9uGjdHwI.js.map
