{"version":3,"file":"RegisterView-Dy44TM-S.js","sources":["../../src/views/auth/RegisterView.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"mb-6\">\n      <h2 class=\"text-center text-2xl font-bold text-gray-900\">Создать аккаунт</h2>\n      <p class=\"mt-2 text-center text-sm text-gray-600\">\n        Зарегистрируйтесь для начала работы с аналитикой\n      </p>\n    </div>\n\n    <form @submit.prevent=\"handleRegister\" class=\"space-y-6\">\n      <BaseInput\n        id=\"name\"\n        v-model=\"form.name\"\n        label=\"Имя\"\n        placeholder=\"Ваше имя\"\n        :error=\"errors.name\"\n        :icon=\"UserIcon\"\n      />\n\n      <BaseInput\n        id=\"email\"\n        v-model=\"form.email\"\n        label=\"Email\"\n        type=\"email\"\n        placeholder=\"your@email.com\"\n        required\n        :error=\"errors.email\"\n        :icon=\"EnvelopeIcon\"\n      />\n\n      <BaseInput\n        id=\"password\"\n        v-model=\"form.password\"\n        label=\"Пароль\"\n        type=\"password\"\n        placeholder=\"••••••••\"\n        required\n        :error=\"errors.password\"\n        :icon=\"LockClosedIcon\"\n        hint=\"Минимум 6 символов\"\n      />\n\n      <BaseInput\n        id=\"confirmPassword\"\n        v-model=\"form.confirmPassword\"\n        label=\"Подтвердите пароль\"\n        type=\"password\"\n        placeholder=\"••••••••\"\n        required\n        :error=\"errors.confirmPassword\"\n        :icon=\"LockClosedIcon\"\n      />\n\n      <div class=\"flex items-center\">\n        <input\n          id=\"agree-terms\"\n          v-model=\"form.agreeTerms\"\n          name=\"agree-terms\"\n          type=\"checkbox\"\n          class=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n        />\n        <label for=\"agree-terms\" class=\"ml-2 block text-sm text-gray-900\">\n          Я согласен с\n          <a href=\"#\" class=\"text-primary-600 hover:text-primary-500\">условиями использования</a>\n          и\n          <a href=\"#\" class=\"text-primary-600 hover:text-primary-500\">политикой конфиденциальности</a>\n        </label>\n      </div>\n      <div v-if=\"errors.agreeTerms\" class=\"text-sm text-red-600\">{{ errors.agreeTerms }}</div>\n\n      <BaseButton\n        type=\"submit\"\n        variant=\"primary\"\n        :loading=\"loading\"\n        :disabled=\"!isFormValid\"\n        full-width\n      >\n        Создать аккаунт\n      </BaseButton>\n\n      <div v-if=\"error\" class=\"rounded-md bg-red-50 p-4\">\n        <div class=\"flex\">\n          <ExclamationTriangleIcon class=\"h-5 w-5 text-red-400\" />\n          <div class=\"ml-3\">\n            <h3 class=\"text-sm font-medium text-red-800\">Ошибка регистрации</h3>\n            <div class=\"mt-2 text-sm text-red-700\">\n              <p>{{ error }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\nimport BaseInput from '@/components/ui/BaseInput.vue'\nimport BaseButton from '@/components/ui/BaseButton.vue'\nimport { UserIcon, EnvelopeIcon, LockClosedIcon, ExclamationTriangleIcon } from '@heroicons/vue/24/outline'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\n\nconst form = reactive({\n  name: '',\n  email: '',\n  password: '',\n  confirmPassword: '',\n  agreeTerms: false,\n})\n\nconst errors = reactive({\n  name: '',\n  email: '',\n  password: '',\n  confirmPassword: '',\n  agreeTerms: '',\n})\n\nconst loading = ref(false)\nconst error = ref('')\n\nconst isFormValid = computed(() => {\n  return (\n    form.email &&\n    form.password &&\n    form.confirmPassword &&\n    form.agreeTerms &&\n    !Object.values(errors).some(error => error)\n  )\n})\n\nconst validateForm = () => {\n  // Reset errors\n  Object.keys(errors).forEach(key => {\n    errors[key as keyof typeof errors] = ''\n  })\n\n  if (!form.email) {\n    errors.email = 'Email обязателен'\n  } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email)) {\n    errors.email = 'Некорректный формат email'\n  }\n\n  if (!form.password) {\n    errors.password = 'Пароль обязателен'\n  } else if (form.password.length < 6) {\n    errors.password = 'Пароль должен содержать минимум 6 символов'\n  }\n\n  if (!form.confirmPassword) {\n    errors.confirmPassword = 'Подтверждение пароля обязательно'\n  } else if (form.password !== form.confirmPassword) {\n    errors.confirmPassword = 'Пароли не совпадают'\n  }\n\n  if (!form.agreeTerms) {\n    errors.agreeTerms = 'Необходимо согласиться с условиями использования'\n  }\n\n  return !Object.values(errors).some(error => error)\n}\n\nconst handleRegister = async () => {\n  if (!validateForm()) return\n\n  try {\n    loading.value = true\n    error.value = ''\n    \n    await authStore.register({\n      email: form.email,\n      password: form.password,\n      name: form.name || undefined,\n    })\n    \n    router.push('/')\n  } catch (err: any) {\n    error.value = err.response?.data?.message || 'Произошла ошибка при регистрации'\n  } finally {\n    loading.value = false\n  }\n}\n</script>"],"names":["router","useRouter","authStore","useAuthStore","form","reactive","errors","loading","ref","error","isFormValid","computed","validateForm","key","handleRegister","err","_b","_a","_createElementBlock","_createElementVNode","_createVNode","BaseInput","_cache","$event","_unref","UserIcon","EnvelopeIcon","LockClosedIcon","_hoisted_1","_vModelCheckbox","_openBlock","_hoisted_2","_toDisplayString","BaseButton","_hoisted_3","_hoisted_4","ExclamationTriangleIcon","_hoisted_5","_hoisted_6"],"mappings":"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"}